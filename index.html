<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <title>JSONP</title>

    <!-- JQuery -->
    <script src="node_modules/jquery/dist/jquery.min.js"></script>

    <!-- Bootstrap -->
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="bower_components/bootstrap/dist/css/bootstrap-theme.min.css">
    <script src="bower_components/bootstrap/dist/js/bootstrap.min.js"></script>

    <!-- Matter -->
    <script src="node_modules/CBuffer/cbuffer.js"></script>
    <script src="node_modules/eastasianwidth/eastasianwidth.js"></script>
    <script src="matter-module/matter-module.js"></script>

    <!-- レンダリング -->
    <script src="renderer.js"></script>

    <!-- Lispインタプリタ -->
    <script src="vm.js"></script>

    <!-- .scm ファイル -->
    <script src="assets.js"></script>

    <!-- ページJS -->
    <script src="jsonp.js"></script>

    <!-- アプリケーションCSS -->
    <link rel="stylesheet" href="index.css">
  </head>
  <body style="background-color: #111; color: #eee">

    <div class="container">

      <!-- Matter 表示キャンバス -->
      <div id="screen-outer" style="position: relative">
        <canvas id="bottom-layer" style="position: absolute; left: 0; top: 0; z-index: 0" width=640 height=384></canvas>
        <canvas id="top-layer"    style="position: absolute; left: 0; top: 0; z-index: 1" width=640 height=384></canvas>
      </div>

      <!-- インジケータ -->
      <div style="margin-top: 10px; margin-left: 15px; color: #eee; margin-right: 10px">
        <span id="indicator-idle" style="font-size: 20px; color: #333">●</span>
        <span id="indicator-busy" style="display: none; text-shadow: 0px 0px 10px red; font-size: 20px; color: #f10">●</span>
        <span style="margin-right: 0.5em; ">BUSY</span>

        <span id="indicator-no-sticky" style="font-size: 20px; color: #333">●</span>
        <span id="indicator-sticky" style="display: none; text-shadow: 0px 0px 10px red; font-size: 20px; color: #f10">●</span>
        <span style="margin-right: 0.5em; ">STICKY</span>

        <span id="indicator-no-lock" style="font-size: 20px; color: #333">●</span>
        <span id="indicator-lock" style="display: none; text-shadow: 0px 0px 10px red; font-size: 20px; color: #f10">●</span>
        <span style="margin-right: 0.5em; ">CTRL LOCK</span>
        <br>
      </div>
      <div style="color: #eee">
        CPU: <span id="instructions">N/A</span>
      </div>
      <h3>操作説明</h3>

      <p>以下のキー操作はいつでも使えます。</p>

      <pre>
        Pause キー: 現在対話中のプログラムを強制終了させる。
        Shift+PageUp と Shift+PageDown: 画面履歴のスクロール。
      </pre>

      <h3>行編集</h3>
      <p>
        プログラムが行入力を受け付けている時は以下のキー操作が行なえます。
      </p>

      <pre>
        Backspace キー: 一文字削除。
        Ctrl+U: 一行まるごと削除。
        Ctrl+P: 直前に入力した行を呼び戻す。
        Ctrl+D: 何も入力しないことをプログラムに伝える。この操作を行うとシェルやREPLは終了します。
      </pre>

      <h3>コマンド一覧</h3>

      <pre>
        cat:   画面に指定したファイルの内容を表示します。
        echo:  引数として与えた文字列を表示。
        hello: ハローワールドプログラム。
        ls:    ファイル一覧を表示。(ディレクトリの概念はありません)
        more:  ページャー。ファイルを閲覧します。
        repl:  Lisp対話プログラム。
        reset: 画面のリセット。
        scr:   スクリーンセーバー。
        shell: 対話シェル。
        vi:    vi風エディタ。
      </pre>

      <h3>Vi.scm</h3>

      <p>Vi 風の簡易テキストエディタです。Vi のようにコマンドモードと
        入力モードがあります。起動直後は入力モードで、アルファベットの入
      力はコマンドとして扱われます。</p>

      <p>終了するにはエスケープキーを押してコマンドモードに移行した後、<kbd>:q</kbd> と入力してエンターキーを押してください。</p>

      <h4>コマンドモード</h4>
      <pre>
        h, j, k, l: カーソルをそれぞれ左下上右に移動。
        i: 挿入モードに切り替える。
        a: 挿入モードに切り替える。カーソルの右に文字列を挿入。
        :(コロン): 画面の最下行で w (ファイルの保存) q (エディタの終了) などのコマンドが入力できるようになります。
        G: ファイルの最後に移動。
        o: 現在行の下に新しい行を追加、入力モードに移行。
        O: 現在行の上に新しい行を追加、入力モードに移行。
        d: 現在行を削除。
        x: カーソル位置の文字を削除。
        ^: 行の先頭へ移動。
        $: 行の末尾へ移動。
      </pre>

      <h4>入力モード</h4>
      <p>エスケープキーでコマンドモードに戻ります。文字キーはその文字
        がカーソル位置に追加されます。</p>

      <h4>Exコマンドモード</h4>

      <p>コマンドモードで : を押すと、画面の最下行にカーソルが移動し、
      一行のコマンドを受け付ける状態になります。w でファイルの保存、q
        でエディタの終了、wq でファイルを保存して終了します。</p>
    </div>
  </body>

</html>
